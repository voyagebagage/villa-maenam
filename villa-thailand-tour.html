<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Villa Maenam — Koh Samui, Thailand</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=Jost:wght@200;300;400;500&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<style>
  :root {
    --ivory: #F8F3E8;
    --ivory-dark: #EDE5D0;
    --dark: #1A1208;
    --dark-mid: #2C1F0E;
    --gold: #C4903A;
    --gold-light: #E2B86A;
    --gold-pale: #F0D89A;
    --forest: #253D34;
    --forest-mid: #3A6153;
    --sage: #6A9E8B;
    --terra: #B85E3A;
    --white: #FDFAF4;
  }
  
  * { margin: 0; padding: 0; box-sizing: border-box; }
  
  html { scroll-behavior: smooth; }
  
  body {
    background: var(--dark);
    color: var(--ivory);
    font-family: 'Jost', sans-serif;
    font-weight: 300;
    overflow-x: hidden;
    cursor: none;
  }

  /* ── Custom Cursor ── */
  #cursor {
    position: fixed;
    width: 8px; height: 8px;
    background: var(--gold);
    border-radius: 50%;
    pointer-events: none;
    z-index: 9999;
    transform: translate(-50%, -50%);
    transition: transform 0.1s, width 0.3s, height 0.3s, background 0.3s;
  }
  #cursor-ring {
    position: fixed;
    width: 36px; height: 36px;
    border: 1px solid rgba(196, 144, 58, 0.5);
    border-radius: 50%;
    pointer-events: none;
    z-index: 9998;
    transform: translate(-50%, -50%);
    transition: transform 0.15s ease-out, width 0.3s, height 0.3s;
  }
  body.hovering #cursor { width: 12px; height: 12px; background: var(--gold-light); }
  body.hovering #cursor-ring { width: 52px; height: 52px; border-color: rgba(196, 144, 58, 0.8); }
  body.clicking #cursor { transform: translate(-50%, -50%) scale(0.6); }

  /* ── Loading Screen ── */
  #loader {
    position: fixed;
    inset: 0;
    background: var(--dark);
    z-index: 9000;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 24px;
    transition: opacity 0.8s ease, visibility 0.8s;
  }
  #loader.hidden { opacity: 0; visibility: hidden; }
  .loader-logo {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(32px, 6vw, 64px);
    font-weight: 300;
    letter-spacing: 0.15em;
    color: var(--gold);
    animation: fadeInUp 1s ease forwards;
    opacity: 0;
  }
  .loader-sub {
    font-size: 11px;
    letter-spacing: 0.4em;
    text-transform: uppercase;
    color: var(--sage);
    animation: fadeInUp 1s 0.3s ease forwards;
    opacity: 0;
  }
  .loader-bar {
    width: 200px;
    height: 1px;
    background: rgba(196, 144, 58, 0.2);
    position: relative;
    overflow: hidden;
    animation: fadeInUp 1s 0.5s ease forwards;
    opacity: 0;
  }
  .loader-progress {
    position: absolute;
    inset: 0;
    background: linear-gradient(90deg, var(--gold), var(--gold-light));
    transform: translateX(-100%);
    animation: loadProgress 1.8s 0.6s ease forwards;
  }
  @keyframes loadProgress { to { transform: translateX(0); } }
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* ── Navigation ── */
  nav {
    position: fixed;
    top: 0; left: 0; right: 0;
    z-index: 800;
    padding: 28px 60px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: linear-gradient(to bottom, rgba(26, 18, 8, 0.8), transparent);
    transition: background 0.4s;
  }
  nav.scrolled { background: rgba(26, 18, 8, 0.95); padding: 18px 60px; }
  .nav-brand {
    font-family: 'Cormorant Garamond', serif;
    font-size: 22px;
    font-weight: 400;
    letter-spacing: 0.1em;
    color: var(--gold);
    text-decoration: none;
  }
  .nav-links {
    display: flex;
    gap: 40px;
    list-style: none;
  }
  .nav-links a {
    font-size: 11px;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    color: var(--ivory-dark);
    text-decoration: none;
    transition: color 0.3s;
    position: relative;
  }
  .nav-links a::after {
    content: '';
    position: absolute;
    bottom: -4px; left: 0; right: 0;
    height: 1px;
    background: var(--gold);
    transform: scaleX(0);
    transition: transform 0.3s;
  }
  .nav-links a:hover { color: var(--gold); }
  .nav-links a:hover::after { transform: scaleX(1); }
  .nav-cta {
    font-size: 11px;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    color: var(--dark);
    background: var(--gold);
    padding: 12px 28px;
    text-decoration: none;
    transition: background 0.3s, transform 0.2s;
  }
  .nav-cta:hover { background: var(--gold-light); transform: translateY(-1px); }

  /* ── Hero ── */
  #hero {
    position: relative;
    height: 100vh;
    min-height: 700px;
    overflow: hidden;
    display: flex;
    align-items: flex-end;
    padding-bottom: 100px;
  }
  #hero-canvas {
    position: absolute;
    inset: 0;
    width: 100%; height: 100%;
  }
  .hero-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      to top,
      rgba(26, 18, 8, 0.85) 0%,
      rgba(26, 18, 8, 0.3) 50%,
      rgba(26, 18, 8, 0.1) 100%
    );
  }
  .hero-content {
    position: relative;
    z-index: 10;
    padding: 0 60px;
    max-width: 800px;
  }
  .hero-tag {
    font-size: 10px;
    letter-spacing: 0.5em;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 24px;
    opacity: 0;
    animation: fadeInUp 1s 2.2s ease forwards;
  }
  .hero-title {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(52px, 8vw, 110px);
    font-weight: 300;
    line-height: 0.9;
    letter-spacing: -0.02em;
    margin-bottom: 32px;
    opacity: 0;
    animation: fadeInUp 1s 2.4s ease forwards;
  }
  .hero-title em {
    font-style: italic;
    color: var(--gold);
  }
  .hero-desc {
    font-size: 15px;
    font-weight: 300;
    line-height: 1.7;
    color: rgba(248, 243, 232, 0.7);
    max-width: 460px;
    margin-bottom: 48px;
    opacity: 0;
    animation: fadeInUp 1s 2.6s ease forwards;
  }
  .hero-actions {
    display: flex;
    gap: 20px;
    align-items: center;
    opacity: 0;
    animation: fadeInUp 1s 2.8s ease forwards;
  }
  .btn-primary {
    display: inline-block;
    background: var(--gold);
    color: var(--dark);
    padding: 16px 44px;
    font-size: 11px;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    text-decoration: none;
    transition: background 0.3s, transform 0.2s;
  }
  .btn-primary:hover { background: var(--gold-light); transform: translateY(-2px); }
  .btn-outline {
    display: inline-block;
    border: 1px solid rgba(196, 144, 58, 0.5);
    color: var(--gold);
    padding: 15px 44px;
    font-size: 11px;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    text-decoration: none;
    transition: all 0.3s;
  }
  .btn-outline:hover { border-color: var(--gold); background: rgba(196, 144, 58, 0.1); }
  .hero-scroll {
    position: absolute;
    bottom: 40px;
    right: 60px;
    z-index: 10;
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 10px;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    color: var(--sage);
    opacity: 0;
    animation: fadeInUp 1s 3s ease forwards;
  }
  .scroll-line {
    width: 60px;
    height: 1px;
    background: var(--sage);
    position: relative;
    overflow: hidden;
  }
  .scroll-line::after {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--gold);
    animation: scrollLine 2s ease-in-out infinite;
  }
  @keyframes scrollLine {
    0% { transform: translateX(-100%); }
    50% { transform: translateX(100%); }
    100% { transform: translateX(100%); }
  }

  /* ── Stats Strip ── */
  .stats-strip {
    background: var(--forest);
    padding: 48px 60px;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 40px;
    border-top: 1px solid rgba(196, 144, 58, 0.2);
    border-bottom: 1px solid rgba(196, 144, 58, 0.2);
  }
  .stat-item { text-align: center; }
  .stat-num {
    font-family: 'Cormorant Garamond', serif;
    font-size: 52px;
    font-weight: 300;
    color: var(--gold);
    line-height: 1;
    display: block;
    margin-bottom: 8px;
  }
  .stat-label {
    font-size: 10px;
    letter-spacing: 0.35em;
    text-transform: uppercase;
    color: var(--sage);
  }

  /* ── Tour Section ── */
  #tour {
    position: relative;
    width: 100%;
    height: 100vh;
    min-height: 700px;
    overflow: hidden;
    background: var(--dark);
  }
  #tour-canvas {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    touch-action: none;
  }
  .tour-header {
    position: absolute;
    top: 0; left: 0; right: 0;
    z-index: 100;
    padding: 32px 60px;
    background: linear-gradient(to bottom, rgba(26,18,8,0.8), transparent);
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .tour-section-label {
    font-size: 10px;
    letter-spacing: 0.5em;
    text-transform: uppercase;
    color: var(--gold);
  }
  .tour-title-block h2 {
    font-family: 'Cormorant Garamond', serif;
    font-size: 28px;
    font-weight: 300;
    letter-spacing: 0.05em;
  }
  .tour-hint {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 11px;
    letter-spacing: 0.15em;
    color: rgba(248, 243, 232, 0.5);
  }
  .hint-icon {
    width: 36px;
    height: 36px;
    border: 1px solid rgba(196, 144, 58, 0.3);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: rotate 8s linear infinite;
  }
  @keyframes rotate { to { transform: rotate(360deg); } }
  
  /* Room Info Panel */
  .room-info {
    position: absolute;
    bottom: 0; left: 0; right: 0;
    z-index: 100;
    padding: 40px 60px;
    background: linear-gradient(to top, rgba(26,18,8,0.95) 0%, rgba(26,18,8,0.6) 60%, transparent 100%);
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
  }
  .room-name-block {
    max-width: 500px;
    transition: opacity 0.4s, transform 0.4s;
  }
  .room-name-block.changing { opacity: 0; transform: translateY(10px); }
  .room-num {
    font-family: 'Cormorant Garamond', serif;
    font-size: 14px;
    color: var(--gold);
    letter-spacing: 0.2em;
    margin-bottom: 8px;
  }
  .room-name {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(32px, 4vw, 52px);
    font-weight: 300;
    line-height: 1;
    margin-bottom: 12px;
  }
  .room-desc {
    font-size: 13px;
    font-weight: 300;
    line-height: 1.7;
    color: rgba(248, 243, 232, 0.65);
    max-width: 380px;
  }
  
  /* Room Navigation Dots */
  .room-nav {
    display: flex;
    flex-direction: column;
    gap: 10px;
    align-items: flex-end;
  }
  .room-dot-btn {
    display: flex;
    align-items: center;
    gap: 12px;
    cursor: pointer;
    padding: 4px 0;
    border: none;
    background: none;
    color: rgba(248,243,232,0.5);
    font-family: 'Jost', sans-serif;
    font-size: 10px;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    transition: color 0.3s;
  }
  .room-dot-btn:hover, .room-dot-btn.active { color: var(--gold); }
  .dot {
    width: 8px; height: 8px;
    border-radius: 50%;
    background: rgba(196, 144, 58, 0.3);
    transition: background 0.3s, transform 0.3s;
  }
  .room-dot-btn.active .dot { background: var(--gold); transform: scale(1.5); }
  .dot-line {
    width: 30px; height: 1px;
    background: rgba(196, 144, 58, 0.3);
    transition: background 0.3s, width 0.3s;
  }
  .room-dot-btn.active .dot-line { background: var(--gold); width: 50px; }
  
  /* Compass */
  .compass {
    position: absolute;
    top: 90px; right: 60px;
    z-index: 100;
    width: 60px; height: 60px;
    border: 1px solid rgba(196, 144, 58, 0.3);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .compass-inner {
    width: 40px; height: 40px;
    border: 1px solid rgba(196, 144, 58, 0.2);
    border-radius: 50%;
    position: relative;
  }
  .compass-n {
    position: absolute;
    top: 2px; left: 50%;
    transform: translateX(-50%);
    font-size: 8px;
    letter-spacing: 0.1em;
    color: var(--gold);
  }

  /* Transition overlay */
  #transition-overlay {
    position: absolute;
    inset: 0;
    background: var(--dark);
    opacity: 0;
    pointer-events: none;
    z-index: 50;
    transition: opacity 0.4s ease;
  }
  #transition-overlay.active { opacity: 1; }

  /* ── Amenities Section ── */
  #amenities {
    background: var(--ivory);
    color: var(--dark);
    padding: 120px 60px;
  }
  .section-header {
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    margin-bottom: 80px;
  }
  .section-tag {
    font-size: 10px;
    letter-spacing: 0.5em;
    text-transform: uppercase;
    color: var(--terra);
    margin-bottom: 16px;
    display: block;
  }
  .section-title {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(40px, 5vw, 72px);
    font-weight: 300;
    line-height: 1;
    letter-spacing: -0.02em;
  }
  .section-title em { font-style: italic; color: var(--forest-mid); }
  .section-desc {
    max-width: 360px;
    font-size: 14px;
    line-height: 1.8;
    color: rgba(26, 18, 8, 0.6);
  }
  
  .amenities-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2px;
    background: var(--ivory-dark);
  }
  .amenity-card {
    background: var(--ivory);
    padding: 52px 44px;
    transition: background 0.3s;
    position: relative;
    overflow: hidden;
  }
  .amenity-card::before {
    content: '';
    position: absolute;
    bottom: 0; left: 0;
    width: 100%; height: 3px;
    background: linear-gradient(90deg, var(--gold), var(--gold-light));
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.4s;
  }
  .amenity-card:hover { background: #F0E8D4; }
  .amenity-card:hover::before { transform: scaleX(1); }
  .amenity-icon {
    width: 52px; height: 52px;
    margin-bottom: 28px;
    opacity: 0.7;
  }
  .amenity-name {
    font-family: 'Cormorant Garamond', serif;
    font-size: 22px;
    font-weight: 400;
    margin-bottom: 12px;
    color: var(--dark);
  }
  .amenity-detail {
    font-size: 13px;
    line-height: 1.7;
    color: rgba(26, 18, 8, 0.55);
  }

  /* ── Gallery Strip ── */
  #gallery {
    padding: 120px 60px;
    background: var(--dark-mid);
  }
  .gallery-header {
    text-align: center;
    margin-bottom: 72px;
  }
  .gallery-grid {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr;
    grid-template-rows: 340px 200px;
    gap: 3px;
  }
  .gallery-item {
    position: relative;
    overflow: hidden;
    cursor: pointer;
  }
  .gallery-item:first-child {
    grid-row: 1 / 3;
  }
  .gallery-item canvas {
    width: 100%;
    height: 100%;
    display: block;
    transition: transform 0.6s ease;
  }
  .gallery-item:hover canvas { transform: scale(1.05); }
  .gallery-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(to top, rgba(26,18,8,0.7) 0%, transparent 50%);
    opacity: 0;
    transition: opacity 0.4s;
    display: flex;
    align-items: flex-end;
    padding: 24px;
  }
  .gallery-item:hover .gallery-overlay { opacity: 1; }
  .gallery-label {
    font-family: 'Cormorant Garamond', serif;
    font-size: 18px;
    font-weight: 300;
    color: var(--ivory);
  }

  /* ── Location ── */
  #location {
    background: var(--forest);
    padding: 120px 60px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 80px;
    align-items: center;
  }
  .location-text .section-tag { color: var(--gold-pale); }
  .location-text .section-title { color: var(--ivory); }
  .location-text .section-title em { color: var(--gold); }
  .location-detail {
    font-size: 14px;
    line-height: 1.9;
    color: rgba(248, 243, 232, 0.6);
    margin-top: 28px;
    margin-bottom: 44px;
  }
  .location-map {
    position: relative;
    height: 480px;
    border: 1px solid rgba(196, 144, 58, 0.2);
    overflow: hidden;
  }
  .location-map canvas { width: 100%; height: 100%; }
  .map-pin {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0;
    z-index: 10;
    pointer-events: none;
    animation: pinBounce 3s ease-in-out infinite;
  }
  .map-pin-dot {
    width: 16px; height: 16px;
    background: var(--gold);
    border-radius: 50%;
    border: 2px solid var(--ivory);
    box-shadow: 0 0 0 0 rgba(196, 144, 58, 0.4);
    animation: pinPulse 2s ease-in-out infinite;
  }
  .map-pin-line {
    width: 1px;
    height: 40px;
    background: linear-gradient(to bottom, var(--gold), transparent);
  }
  .map-label {
    background: rgba(26, 18, 8, 0.85);
    border: 1px solid rgba(196, 144, 58, 0.4);
    padding: 8px 16px;
    font-size: 12px;
    letter-spacing: 0.15em;
    color: var(--gold);
    font-family: 'Cormorant Garamond', serif;
    white-space: nowrap;
    margin-top: 8px;
  }
  @keyframes pinPulse {
    0%,100% { box-shadow: 0 0 0 0 rgba(196,144,58,0.4); }
    50% { box-shadow: 0 0 0 12px rgba(196,144,58,0); }
  }
  @keyframes pinBounce {
    0%,100% { transform: translate(-50%, -50%); }
    50% { transform: translate(-50%, calc(-50% - 8px)); }
  }

  /* ── Booking ── */
  #booking {
    background: var(--dark);
    padding: 120px 60px;
    text-align: center;
    position: relative;
    overflow: hidden;
  }
  #booking::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(ellipse at 50% 50%, rgba(196, 144, 58, 0.08) 0%, transparent 70%);
  }
  .booking-content { position: relative; z-index: 1; max-width: 600px; margin: 0 auto; }
  .booking-title {
    font-family: 'Cormorant Garamond', serif;
    font-size: clamp(44px, 6vw, 80px);
    font-weight: 300;
    line-height: 1;
    margin-bottom: 32px;
  }
  .booking-title em { font-style: italic; color: var(--gold); }
  .booking-desc {
    font-size: 14px;
    line-height: 1.8;
    color: rgba(248, 243, 232, 0.55);
    margin-bottom: 48px;
  }
  .booking-form {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2px;
    margin-bottom: 2px;
  }
  .form-field {
    background: rgba(248, 243, 232, 0.04);
    border: 1px solid rgba(196, 144, 58, 0.15);
    padding: 18px 24px;
    font-family: 'Jost', sans-serif;
    font-size: 12px;
    letter-spacing: 0.1em;
    color: var(--ivory);
    outline: none;
    transition: border-color 0.3s, background 0.3s;
    width: 100%;
  }
  .form-field::placeholder { color: rgba(248, 243, 232, 0.3); }
  .form-field:focus { border-color: rgba(196, 144, 58, 0.5); background: rgba(248, 243, 232, 0.07); }
  .form-submit {
    width: 100%;
    background: var(--gold);
    color: var(--dark);
    border: none;
    padding: 22px;
    font-family: 'Jost', sans-serif;
    font-size: 11px;
    letter-spacing: 0.4em;
    text-transform: uppercase;
    cursor: pointer;
    transition: background 0.3s;
    margin-top: 2px;
  }
  .form-submit:hover { background: var(--gold-light); }

  /* ── Footer ── */
  footer {
    background: var(--forest);
    padding: 80px 60px 48px;
    border-top: 1px solid rgba(196, 144, 58, 0.2);
  }
  .footer-grid {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr 1fr;
    gap: 60px;
    margin-bottom: 60px;
  }
  .footer-brand {
    font-family: 'Cormorant Garamond', serif;
    font-size: 28px;
    font-weight: 300;
    color: var(--gold);
    letter-spacing: 0.1em;
    margin-bottom: 16px;
  }
  .footer-tagline {
    font-size: 12px;
    line-height: 1.8;
    color: rgba(248, 243, 232, 0.45);
    max-width: 260px;
  }
  .footer-col h4 {
    font-size: 10px;
    letter-spacing: 0.35em;
    text-transform: uppercase;
    color: var(--gold);
    margin-bottom: 24px;
  }
  .footer-col ul { list-style: none; }
  .footer-col li {
    font-size: 13px;
    color: rgba(248, 243, 232, 0.5);
    margin-bottom: 12px;
    transition: color 0.3s;
    cursor: pointer;
  }
  .footer-col li:hover { color: var(--ivory); }
  .footer-bottom {
    border-top: 1px solid rgba(248, 243, 232, 0.08);
    padding-top: 32px;
    display: flex;
    justify-content: space-between;
    font-size: 11px;
    color: rgba(248, 243, 232, 0.3);
  }

  /* Decorative line divider */
  .divider {
    display: flex;
    align-items: center;
    gap: 24px;
    padding: 0 60px;
    background: var(--dark);
    height: 1px;
    position: relative;
  }
  .divider::before {
    content: '';
    flex: 1;
    height: 1px;
    background: rgba(196, 144, 58, 0.2);
  }
  .divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: rgba(196, 144, 58, 0.2);
  }

  @media (max-width: 900px) {
    nav { padding: 20px 30px; }
    .nav-links { display: none; }
    .hero-content { padding: 0 30px; }
    .stats-strip { grid-template-columns: repeat(2, 1fr); padding: 40px 30px; }
    #amenities { padding: 80px 30px; }
    .amenities-grid { grid-template-columns: 1fr; }
    .section-header { flex-direction: column; gap: 24px; }
    .gallery-grid { grid-template-columns: 1fr; grid-template-rows: repeat(5, 200px); }
    .gallery-item:first-child { grid-row: auto; }
    #location { grid-template-columns: 1fr; padding: 80px 30px; }
    .footer-grid { grid-template-columns: 1fr 1fr; gap: 40px; }
    .tour-header { padding: 20px 30px; }
    .room-info { padding: 24px 30px; }
    .nav-cta { display: none; }
    #booking { padding: 80px 30px; }
    .booking-form { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<div id="cursor"></div>
<div id="cursor-ring"></div>

<!-- Loading Screen -->
<div id="loader">
  <div class="loader-logo">Villa Maenam</div>
  <div class="loader-sub">Koh Samui · Thailand</div>
  <div class="loader-bar"><div class="loader-progress"></div></div>
</div>

<!-- Navigation -->
<nav id="navbar">
  <a href="#" class="nav-brand">Villa Maenam</a>
  <ul class="nav-links">
    <li><a href="#tour">Virtual Tour</a></li>
    <li><a href="#amenities">Amenities</a></li>
    <li><a href="#location">Location</a></li>
    <li><a href="#booking">Enquire</a></li>
  </ul>
  <a href="#booking" class="nav-cta">Book Now</a>
</nav>

<!-- Hero -->
<section id="hero">
  <canvas id="hero-canvas"></canvas>
  <div class="hero-overlay"></div>
  <div class="hero-content">
    <p class="hero-tag">Exclusive Private Villa · Koh Samui</p>
    <h1 class="hero-title">Villa<br><em>Maenam</em></h1>
    <p class="hero-desc">A sanctuary suspended between jungle and sea. Six pavilions, a private pool, and the unhurried rhythm of island life — crafted for those who seek something beyond luxury.</p>
    <div class="hero-actions">
      <a href="#tour" class="btn-primary">Begin Tour</a>
      <a href="#booking" class="btn-outline">Enquire</a>
    </div>
  </div>
  <div class="hero-scroll">
    <div class="scroll-line"></div>
    <span>Scroll</span>
  </div>
</section>

<!-- Stats -->
<div class="stats-strip">
  <div class="stat-item">
    <span class="stat-num">6</span>
    <span class="stat-label">Bedroom Suites</span>
  </div>
  <div class="stat-item">
    <span class="stat-num">18</span>
    <span class="stat-label">Metres Pool Length</span>
  </div>
  <div class="stat-item">
    <span class="stat-num">2.4</span>
    <span class="stat-label">Acres of Gardens</span>
  </div>
  <div class="stat-item">
    <span class="stat-num">∞</span>
    <span class="stat-label">Sea Views</span>
  </div>
</div>

<!-- 3D Virtual Tour -->
<section id="tour">
  <canvas id="tour-canvas"></canvas>
  <div id="transition-overlay"></div>
  
  <div class="tour-header">
    <div>
      <p class="tour-section-label">360° Virtual Tour</p>
      <div class="tour-title-block"><h2>Explore the Villa</h2></div>
    </div>
    <div class="tour-hint">
      <div class="hint-icon">
        <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
          <circle cx="9" cy="9" r="8" stroke="rgba(196,144,58,0.6)" stroke-width="1"/>
          <path d="M5 9h8M9 5l4 4-4 4" stroke="rgba(196,144,58,0.8)" stroke-width="1" fill="none"/>
        </svg>
      </div>
      <span>Drag to explore</span>
    </div>
  </div>
  
  <div class="compass">
    <div class="compass-inner">
      <span class="compass-n">N</span>
    </div>
  </div>
  
  <div class="room-info">
    <div class="room-name-block" id="room-info-block">
      <p class="room-num" id="room-num">01 / 05</p>
      <h3 class="room-name" id="room-name">Welcome Pavilion</h3>
      <p class="room-desc" id="room-desc">The open-air arrival sala greets guests with lotus ponds, carved teak columns, and the scent of frangipani on the warm Gulf breeze.</p>
    </div>
    <div class="room-nav" id="room-nav"></div>
  </div>
</section>

<!-- Amenities -->
<section id="amenities">
  <div class="section-header">
    <div>
      <span class="section-tag">The Experience</span>
      <h2 class="section-title">Beyond <em>Ordinary</em></h2>
    </div>
    <p class="section-desc">Every detail of Villa Maenam has been conceived to dissolve the boundary between interior and the lush world outside.</p>
  </div>
  <div class="amenities-grid">
    <div class="amenity-card">
      <svg class="amenity-icon" viewBox="0 0 52 52" fill="none">
        <path d="M26 8C16.06 8 8 16.06 8 26s8.06 18 18 18 18-8.06 18-18S35.94 8 26 8zm0 3a2 2 0 110 4 2 2 0 010-4zM14 20h24v2H14v-2zm0 6h24v2H14v-2zm4 6h16v2H18v-2z" fill="#C4903A" opacity=".7"/>
      </svg>
      <p class="amenity-name">Infinity Pool</p>
      <p class="amenity-detail">An 18-metre infinity pool appears to merge with the Gulf of Thailand horizon, heated and lit for moonlit swims.</p>
    </div>
    <div class="amenity-card">
      <svg class="amenity-icon" viewBox="0 0 52 52" fill="none">
        <path d="M40 16H12a2 2 0 00-2 2v16a2 2 0 002 2h28a2 2 0 002-2V18a2 2 0 00-2-2zm-14 14a4 4 0 110-8 4 4 0 010 8z" fill="#6A9E8B" opacity=".8"/>
        <path d="M26 8v6M26 38v6M8 26H14M38 26h6" stroke="#C4903A" stroke-width="1.5"/>
      </svg>
      <p class="amenity-name">Thai Sala Dining</p>
      <p class="amenity-detail">Three open-air dining salas including a 12-seat banquet pavilion surrounded by lily ponds and jasmine walls.</p>
    </div>
    <div class="amenity-card">
      <svg class="amenity-icon" viewBox="0 0 52 52" fill="none">
        <rect x="10" y="10" width="32" height="32" rx="2" stroke="#C4903A" stroke-width="1.5" opacity=".7"/>
        <path d="M18 26h16M18 20h16M18 32h10" stroke="#6A9E8B" stroke-width="1.5"/>
      </svg>
      <p class="amenity-name">Six Master Suites</p>
      <p class="amenity-detail">Each suite is a private pavilion with four-poster beds, rain showers, and garden terraces overlooking the sea.</p>
    </div>
    <div class="amenity-card">
      <svg class="amenity-icon" viewBox="0 0 52 52" fill="none">
        <circle cx="26" cy="20" r="8" stroke="#C4903A" stroke-width="1.5" opacity=".7"/>
        <path d="M14 40c0-6.627 5.373-12 12-12s12 5.373 12 12" stroke="#6A9E8B" stroke-width="1.5"/>
        <path d="M10 30l4-4M42 30l-4-4" stroke="#C4903A" stroke-width="1" opacity=".5"/>
      </svg>
      <p class="amenity-name">Dedicated Staff</p>
      <p class="amenity-detail">A full villa team including private chef, butler, massage therapists, and concierge available around the clock.</p>
    </div>
    <div class="amenity-card">
      <svg class="amenity-icon" viewBox="0 0 52 52" fill="none">
        <path d="M26 10C17.16 10 10 17.16 10 26s7.16 16 16 16 16-7.16 16-16-7.16-16-16-16zm0 6l2 8h-4l2-8z" fill="#B85E3A" opacity=".6"/>
        <circle cx="26" cy="32" r="3" fill="#C4903A"/>
      </svg>
      <p class="amenity-name">Wellness & Spa</p>
      <p class="amenity-detail">A dedicated spa pavilion with traditional Thai massages, steam room, herbal baths, and sunset yoga deck.</p>
    </div>
    <div class="amenity-card">
      <svg class="amenity-icon" viewBox="0 0 52 52" fill="none">
        <path d="M10 36L26 16l16 20H10z" stroke="#C4903A" stroke-width="1.5" fill="none" opacity=".7"/>
        <circle cx="32" cy="22" r="3" fill="#6A9E8B" opacity=".8"/>
        <path d="M10 36h32" stroke="#C4903A" stroke-width="1.5"/>
      </svg>
      <p class="amenity-name">Tropical Gardens</p>
      <p class="amenity-detail">2.4 acres of manicured tropical gardens with orchid walks, Buddhist spirit houses, and ancient frangipani groves.</p>
    </div>
  </div>
</section>

<!-- Gallery -->
<section id="gallery">
  <div class="gallery-header">
    <span class="section-tag" style="color:var(--gold)">Visual Journey</span>
    <h2 class="section-title" style="color:var(--ivory)">Spaces That <em style="color:var(--gold)">Breathe</em></h2>
  </div>
  <div class="gallery-grid">
    <div class="gallery-item" id="g1">
      <canvas id="gc1"></canvas>
      <div class="gallery-overlay"><p class="gallery-label">Infinity Pool at Dusk</p></div>
    </div>
    <div class="gallery-item" id="g2">
      <canvas id="gc2"></canvas>
      <div class="gallery-overlay"><p class="gallery-label">Master Suite</p></div>
    </div>
    <div class="gallery-item" id="g3">
      <canvas id="gc3"></canvas>
      <div class="gallery-overlay"><p class="gallery-label">Tropical Garden</p></div>
    </div>
    <div class="gallery-item" id="g4">
      <canvas id="gc4"></canvas>
      <div class="gallery-overlay"><p class="gallery-label">Dining Pavilion</p></div>
    </div>
    <div class="gallery-item" id="g5">
      <canvas id="gc5"></canvas>
      <div class="gallery-overlay"><p class="gallery-label">Sunrise Terrace</p></div>
    </div>
  </div>
</section>

<!-- Location -->
<section id="location">
  <div class="location-text">
    <span class="section-tag">Location</span>
    <h2 class="section-title">Maenam<br><em>Beach</em></h2>
    <p class="location-detail">Villa Maenam sits on the quiet north shore of Koh Samui — away from the crowds, yet minutes from the island's finest restaurants, temples, and the celebrated Big Buddha of Ang Thong. The international airport is 25 minutes by car.</p>
    <a href="#booking" class="btn-primary">Arrange Transfer</a>
  </div>
  <div class="location-map">
    <canvas id="map-canvas"></canvas>
    <div class="map-pin">
      <div class="map-pin-dot"></div>
      <div class="map-pin-line"></div>
      <div class="map-label">Villa Maenam</div>
    </div>
  </div>
</section>

<!-- Booking -->
<section id="booking">
  <div class="booking-content">
    <span class="section-tag" style="color:var(--gold)">Reserve Your Stay</span>
    <h2 class="booking-title">An Unforgettable <em>Escape</em></h2>
    <p class="booking-desc">Villa Maenam accommodates up to 12 guests across six suites. Minimum stay of 4 nights. Rates from $3,200 per night including staff.</p>
    <div class="booking-form">
      <input type="text" class="form-field" placeholder="Arrival Date">
      <input type="text" class="form-field" placeholder="Departure Date">
      <input type="text" class="form-field" placeholder="Number of Guests">
      <input type="email" class="form-field" placeholder="Your Email">
    </div>
    <button class="form-submit">Request Availability →</button>
  </div>
</section>

<!-- Footer -->
<footer>
  <div class="footer-grid">
    <div>
      <div class="footer-brand">Villa Maenam</div>
      <p class="footer-tagline">A private sanctuary on the tranquil north shore of Koh Samui, where Thai elegance meets the timeless rhythm of the sea.</p>
    </div>
    <div class="footer-col">
      <h4>Explore</h4>
      <ul>
        <li>The Villa</li>
        <li>Suites</li>
        <li>Pool & Spa</li>
        <li>Dining</li>
        <li>Experiences</li>
      </ul>
    </div>
    <div class="footer-col">
      <h4>Plan</h4>
      <ul>
        <li>Availability</li>
        <li>Rates</li>
        <li>Getting Here</li>
        <li>Local Guide</li>
        <li>Events</li>
      </ul>
    </div>
    <div class="footer-col">
      <h4>Contact</h4>
      <ul>
        <li>+66 77 123 456</li>
        <li>stay@villamaenam.com</li>
        <li>Instagram</li>
        <li>WhatsApp</li>
      </ul>
    </div>
  </div>
  <div class="footer-bottom">
    <span>© 2025 Villa Maenam. All rights reserved.</span>
    <span>Koh Samui, Surat Thani 84330, Thailand</span>
  </div>
</footer>

<script>
// ─────────────────────────────────────────────
// CURSOR
// ─────────────────────────────────────────────
const cursor = document.getElementById('cursor');
const cursorRing = document.getElementById('cursor-ring');
document.addEventListener('mousemove', e => {
  cursor.style.left = e.clientX + 'px';
  cursor.style.top = e.clientY + 'px';
  setTimeout(() => {
    cursorRing.style.left = e.clientX + 'px';
    cursorRing.style.top = e.clientY + 'px';
  }, 50);
});
document.querySelectorAll('a, button, .room-dot-btn, .gallery-item').forEach(el => {
  el.addEventListener('mouseenter', () => document.body.classList.add('hovering'));
  el.addEventListener('mouseleave', () => document.body.classList.remove('hovering'));
});
document.addEventListener('mousedown', () => document.body.classList.add('clicking'));
document.addEventListener('mouseup', () => document.body.classList.remove('clicking'));

// ─────────────────────────────────────────────
// LOADER
// ─────────────────────────────────────────────
window.addEventListener('load', () => {
  setTimeout(() => {
    document.getElementById('loader').classList.add('hidden');
    initHeroCanvas();
    initPanorama();
    drawGallery();
    drawMapCanvas();
  }, 2600);
});

// ─────────────────────────────────────────────
// NAV SCROLL
// ─────────────────────────────────────────────
const navbar = document.getElementById('navbar');
window.addEventListener('scroll', () => {
  navbar.classList.toggle('scrolled', window.scrollY > 80);
});

// ─────────────────────────────────────────────
// HERO CANVAS — animated tropical scene
// ─────────────────────────────────────────────
function initHeroCanvas() {
  const canvas = document.getElementById('hero-canvas');
  const ctx = canvas.getContext('2d');
  let W, H, time = 0;
  
  function resize() {
    W = canvas.width = canvas.offsetWidth;
    H = canvas.height = canvas.offsetHeight;
  }
  resize();
  window.addEventListener('resize', resize);
  
  function drawHero(t) {
    ctx.clearRect(0, 0, W, H);
    
    // Sky gradient
    const sky = ctx.createLinearGradient(0, 0, 0, H * 0.65);
    sky.addColorStop(0, '#0D1F2D');
    sky.addColorStop(0.3, '#1A3A4A');
    sky.addColorStop(0.7, '#C4603A');
    sky.addColorStop(1, '#8B2020');
    ctx.fillStyle = sky;
    ctx.fillRect(0, 0, W, H * 0.65);
    
    // Sun glow
    const sunX = W * 0.65, sunY = H * 0.28;
    const sunGlow = ctx.createRadialGradient(sunX, sunY, 0, sunX, sunY, W * 0.4);
    sunGlow.addColorStop(0, 'rgba(230, 160, 40, 0.5)');
    sunGlow.addColorStop(0.3, 'rgba(220, 100, 30, 0.2)');
    sunGlow.addColorStop(1, 'transparent');
    ctx.fillStyle = sunGlow;
    ctx.fillRect(0, 0, W, H);
    
    // Sun
    ctx.beginPath();
    ctx.arc(sunX, sunY, 40, 0, Math.PI * 2);
    const sunG = ctx.createRadialGradient(sunX, sunY, 0, sunX, sunY, 40);
    sunG.addColorStop(0, '#FFE0A0');
    sunG.addColorStop(0.5, '#F4A030');
    sunG.addColorStop(1, 'rgba(220,80,20,0.3)');
    ctx.fillStyle = sunG;
    ctx.fill();
    
    // Sea
    const sea = ctx.createLinearGradient(0, H * 0.55, 0, H);
    sea.addColorStop(0, '#1A4A5A');
    sea.addColorStop(0.3, '#0D3040');
    sea.addColorStop(1, '#071A28');
    ctx.fillStyle = sea;
    ctx.fillRect(0, H * 0.55, W, H * 0.45);
    
    // Sea shimmer
    ctx.save();
    ctx.globalAlpha = 0.15;
    for (let i = 0; i < 8; i++) {
      const y = H * 0.58 + i * 28 + Math.sin(t * 0.001 + i) * 6;
      const shimmerG = ctx.createLinearGradient(0, y, W, y);
      shimmerG.addColorStop(0, 'transparent');
      shimmerG.addColorStop(0.3, 'rgba(220,160,60,0.8)');
      shimmerG.addColorStop(0.7, 'rgba(220,160,60,0.8)');
      shimmerG.addColorStop(1, 'transparent');
      ctx.fillStyle = shimmerG;
      ctx.fillRect(0, y, W, 1.5);
    }
    ctx.restore();
    
    // Distant islands
    for (let i = 0; i < 3; i++) {
      const ix = W * (0.05 + i * 0.3), iy = H * 0.52;
      const iw = 80 + i * 40, ih = 20 + i * 10;
      const islandG = ctx.createLinearGradient(ix, iy - ih, ix, iy);
      islandG.addColorStop(0, '#1A3028');
      islandG.addColorStop(1, '#0D2018');
      ctx.fillStyle = islandG;
      ctx.beginPath();
      ctx.ellipse(ix, iy, iw, ih, 0, Math.PI, 0, true);
      ctx.fill();
    }
    
    // Foreground jungle silhouette
    ctx.fillStyle = '#0A1A10';
    ctx.beginPath();
    ctx.moveTo(0, H);
    // Left jungle
    for (let x = 0; x <= W * 0.35; x += 20) {
      const y = H * 0.62 + Math.sin(x * 0.02 + 1) * 30 - Math.max(0, (W * 0.2 - x) * 0.5);
      ctx.lineTo(x, y);
    }
    ctx.lineTo(W * 0.35, H);
    ctx.closePath();
    ctx.fill();
    
    // Right jungle
    ctx.beginPath();
    ctx.moveTo(W * 0.55, H);
    for (let x = W * 0.55; x <= W; x += 20) {
      const y = H * 0.6 + Math.sin(x * 0.015) * 35 - Math.max(0, (x - W * 0.8) * 0.4);
      ctx.lineTo(x, y);
    }
    ctx.lineTo(W, H);
    ctx.closePath();
    ctx.fill();
    
    // Palm trees
    drawPalm(ctx, W * 0.12, H * 0.7, H * 0.28, t);
    drawPalm(ctx, W * 0.88, H * 0.68, H * 0.25, t);
    drawPalm(ctx, W * 0.05, H * 0.82, H * 0.2, t);
    
    // Villa silhouette
    drawVillaSilhouette(ctx, W * 0.38, H * 0.52, t);
    
    // Stars
    ctx.save();
    ctx.globalAlpha = 0.6;
    for (let i = 0; i < 80; i++) {
      const sx = (Math.sin(i * 2.3) * 0.5 + 0.5) * W;
      const sy = (Math.sin(i * 1.7) * 0.5 + 0.5) * H * 0.4;
      const sr = 0.5 + Math.sin(t * 0.002 + i) * 0.3;
      ctx.beginPath();
      ctx.arc(sx, sy, Math.max(0.2, sr), 0, Math.PI * 2);
      ctx.fillStyle = 'rgba(255,240,200,0.8)';
      ctx.fill();
    }
    ctx.restore();
  }
  
  function drawPalm(ctx, x, y, h, t) {
    const sway = Math.sin(t * 0.001) * 0.06;
    ctx.save();
    ctx.translate(x, y);
    
    // Trunk
    ctx.beginPath();
    ctx.moveTo(0, 0);
    ctx.quadraticCurveTo(h * sway * 2, -h * 0.5, h * sway * 3, -h);
    ctx.lineWidth = 6;
    ctx.strokeStyle = '#1A2010';
    ctx.stroke();
    
    // Fronds
    const tipX = h * sway * 3, tipY = -h;
    ctx.lineWidth = 2;
    for (let i = 0; i < 7; i++) {
      const angle = (i / 7) * Math.PI * 2 + sway;
      const fl = h * 0.4;
      ctx.beginPath();
      ctx.moveTo(tipX, tipY);
      const fx = tipX + Math.cos(angle) * fl;
      const fy = tipY + Math.sin(angle) * fl * 0.5;
      ctx.quadraticCurveTo(
        tipX + Math.cos(angle) * fl * 0.5,
        tipY + Math.sin(angle) * fl * 0.3 - 20,
        fx, fy
      );
      ctx.strokeStyle = '#1A3010';
      ctx.stroke();
    }
    ctx.restore();
  }
  
  function drawVillaSilhouette(ctx, x, y, t) {
    ctx.save();
    ctx.fillStyle = '#0C1A0E';
    
    // Main roof (Thai style curved)
    ctx.beginPath();
    ctx.moveTo(x - 120, y + 20);
    ctx.lineTo(x - 80, y - 30);
    ctx.quadraticCurveTo(x, y - 60, x + 80, y - 30);
    ctx.lineTo(x + 120, y + 20);
    ctx.closePath();
    ctx.fill();
    
    // Roof finials
    ctx.beginPath();
    ctx.moveTo(x, y - 60);
    ctx.lineTo(x - 5, y - 90);
    ctx.lineTo(x, y - 85);
    ctx.lineTo(x + 5, y - 90);
    ctx.closePath();
    ctx.fill();
    
    // Building body
    ctx.fillRect(x - 90, y + 20, 180, 50);
    
    // Columns
    for (let i = -3; i <= 3; i++) {
      ctx.fillRect(x + i * 24 - 3, y - 10, 6, 30);
    }
    
    // Warm light in windows
    ctx.fillStyle = 'rgba(255, 180, 60, 0.5)';
    for (let i = -2; i <= 2; i++) {
      ctx.fillRect(x + i * 28 - 6, y + 28, 12, 16);
    }
    ctx.restore();
  }
  
  function animate(t) {
    time = t;
    drawHero(t);
    requestAnimationFrame(animate);
  }
  requestAnimationFrame(animate);
}

// ─────────────────────────────────────────────
// THREE.JS PANORAMA VIEWER
// ─────────────────────────────────────────────
const rooms = [
  {
    num: '01 / 05',
    name: 'Welcome Pavilion',
    desc: 'The open-air arrival sala greets guests with lotus ponds, carved teak columns, and the scent of frangipani on the warm Gulf breeze.',
    img: 'pavilion_full.jpg',
    palette: {
      sky: ['#FF8C42','#E85D40','#C43A20','#1A1208'],
      floor: '#2A1E0E',
      accent: '#C4903A',
      walls: '#3D2A12'
    }
  },
  {
    num: '02 / 05',
    name: 'Master Suite',
    desc: 'Six private bedroom pavilions each feature four-poster beds draped in silk, open-air rain showers, and private garden terraces facing the Gulf.',
    palette: {
      sky: ['#F0E8D8','#D4C4A0','#A08060','#4A3020'],
      floor: '#3A2810',
      accent: '#E2B86A',
      walls: '#C4A878'
    }
  },
  {
    num: '03 / 05',
    name: 'Infinity Pool',
    desc: 'A 18-metre heated infinity pool suspended above the jungle canopy, appearing to flow seamlessly into the Gulf of Thailand at the horizon.',
    palette: {
      sky: ['#0A3050','#0D4A6A','#1A7A9A','#5AC8E0'],
      floor: '#E8F4F8',
      accent: '#5AC8E0',
      walls: '#1A6080'
    }
  },
  {
    num: '04 / 05',
    name: 'Tropical Garden',
    desc: 'Wander 2.4 acres of manicured grounds where ancient frangipani trees, orchid-lined paths, and lotus ponds create a living tapestry.',
    palette: {
      sky: ['#0A2810','#1A4A28','#2A7A3A','#5AB050'],
      floor: '#1A3A18',
      accent: '#8AC840',
      walls: '#2A5A20'
    }
  },
  {
    num: '05 / 05',
    name: 'Dining Pavilion',
    desc: 'Dine beneath the stars in the open-air banquet sala where the private chef presents nightly five-course feasts of Thai and fusion cuisine.',
    palette: {
      sky: ['#0A0A18','#1A1A30','#0A0818','#0A0A18'],
      floor: '#2A1808',
      accent: '#FFD060',
      walls: '#1A1218'
    }
  }
];

let currentRoom = 0;
let panoramaRenderer, panoramaScene, panoramaCamera;
let isTransitioning = false;

function initPanorama() {
  const canvas = document.getElementById('tour-canvas');
  
  panoramaRenderer = new THREE.WebGLRenderer({ canvas, antialias: true });
  panoramaRenderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
  panoramaRenderer.setSize(canvas.offsetWidth, canvas.offsetHeight);
  
  panoramaScene = new THREE.Scene();
  panoramaCamera = new THREE.PerspectiveCamera(80, canvas.offsetWidth / canvas.offsetHeight, 0.1, 1000);
  panoramaCamera.position.set(0, 0, 0);
  
  // Sphere geometry (inside-out)
  const geo = new THREE.SphereGeometry(500, 60, 40);
  geo.scale(-1, 1, 1);
  
  // Use a placeholder texture initially, then load the real one if available
  const texture = generateRoomTexture(rooms[0].palette);
  const mat = new THREE.MeshBasicMaterial({ map: texture });
  const sphere = new THREE.Mesh(geo, mat);
  panoramaScene.add(sphere);
  panoramaScene.userData.sphere = sphere;
  
  // If the first room has a real image, load it
  if (rooms[0].img) {
    const loader = new THREE.TextureLoader();
    loader.load(rooms[0].img, (realTex) => {
      realTex.mapping = THREE.EquirectangularReflectionMapping;
      sphere.material.map = realTex;
      sphere.material.needsUpdate = true;
    });
  }
  
  // Build room navigation dots
  buildRoomNav();
  
  // Mouse / touch drag
  let isDown = false, lastX = 0, lastY = 0;
  let rotX = 0, rotY = 0;
  let velX = 0, velY = 0;
  
  canvas.addEventListener('mousedown', e => { isDown = true; lastX = e.clientX; lastY = e.clientY; });
  canvas.addEventListener('touchstart', e => { isDown = true; lastX = e.touches[0].clientX; lastY = e.touches[0].clientY; });
  
  window.addEventListener('mousemove', e => {
    if (!isDown) return;
    const dx = e.clientX - lastX, dy = e.clientY - lastY;
    velX = dx * 0.005; velY = dy * 0.003;
    rotY += velX; rotX += velY;
    rotX = Math.max(-0.6, Math.min(0.6, rotX));
    lastX = e.clientX; lastY = e.clientY;
  });
  window.addEventListener('touchmove', e => {
    if (!isDown) return;
    const dx = e.touches[0].clientX - lastX, dy = e.touches[0].clientY - lastY;
    velX = dx * 0.005; velY = dy * 0.003;
    rotY += velX; rotX += velY;
    rotX = Math.max(-0.6, Math.min(0.6, rotX));
    lastX = e.touches[0].clientX; lastY = e.touches[0].clientY;
  });
  window.addEventListener('mouseup', () => isDown = false);
  window.addEventListener('touchend', () => isDown = false);
  
  function animate() {
    requestAnimationFrame(animate);
    if (!isDown) {
      velX *= 0.95; velY *= 0.95;
      rotY += velX; rotX += velY;
      rotX = Math.max(-0.6, Math.min(0.6, rotX));
      // Auto rotate slowly
      rotY += 0.0008;
    }
    panoramaCamera.rotation.order = 'YXZ';
    panoramaCamera.rotation.y = -rotY;
    panoramaCamera.rotation.x = -rotX;
    panoramaRenderer.render(panoramaScene, panoramaCamera);
  }
  animate();
  
  window.addEventListener('resize', () => {
    const w = canvas.offsetWidth, h = canvas.offsetHeight;
    panoramaRenderer.setSize(w, h);
    panoramaCamera.aspect = w / h;
    panoramaCamera.updateProjectionMatrix();
  });
}

function generateRoomTexture(palette) {
  const size = 2048;
  const c = document.createElement('canvas');
  c.width = size; c.height = size / 2;
  const ctx = c.getContext('2d');
  const W = c.width, H = c.height;
  
  // Sky / ceiling
  const skyGrad = ctx.createLinearGradient(0, 0, 0, H * 0.45);
  palette.sky.forEach((col, i) => skyGrad.addColorStop(i / (palette.sky.length - 1), col));
  ctx.fillStyle = skyGrad;
  ctx.fillRect(0, 0, W, H * 0.45);
  
  // Atmosphere glow
  const glow = ctx.createRadialGradient(W * 0.5, H * 0.15, 0, W * 0.5, H * 0.15, W * 0.4);
  glow.addColorStop(0, palette.accent + '60');
  glow.addColorStop(1, 'transparent');
  ctx.fillStyle = glow;
  ctx.fillRect(0, 0, W, H);
  
  // Horizon band
  const horiz = ctx.createLinearGradient(0, H * 0.4, 0, H * 0.55);
  horiz.addColorStop(0, palette.walls + 'AA');
  horiz.addColorStop(0.5, palette.walls);
  horiz.addColorStop(1, palette.floor + '88');
  ctx.fillStyle = horiz;
  ctx.fillRect(0, H * 0.4, W, H * 0.2);
  
  // Floor
  const floorGrad = ctx.createLinearGradient(0, H * 0.55, 0, H);
  floorGrad.addColorStop(0, palette.floor);
  floorGrad.addColorStop(1, darken(palette.floor, 0.5));
  ctx.fillStyle = floorGrad;
  ctx.fillRect(0, H * 0.55, W, H * 0.45);
  
  // Floor reflection
  const refl = ctx.createLinearGradient(0, H * 0.55, 0, H);
  refl.addColorStop(0, palette.accent + '20');
  refl.addColorStop(0.3, 'transparent');
  ctx.fillStyle = refl;
  ctx.fillRect(0, H * 0.55, W, H * 0.3);
  
  // Vertical pillars / features
  const pillarCount = 8;
  for (let i = 0; i < pillarCount; i++) {
    const px = (i / pillarCount) * W;
    const pillarG = ctx.createLinearGradient(px, H * 0.15, px + 20, H * 0.15);
    pillarG.addColorStop(0, palette.accent + '18');
    pillarG.addColorStop(0.5, palette.accent + '30');
    pillarG.addColorStop(1, palette.accent + '18');
    ctx.fillStyle = pillarG;
    ctx.fillRect(px, H * 0.1, 24, H * 0.5);
  }
  
  // Decorative elements based on room
  drawRoomFeatures(ctx, W, H, palette);
  
  // Vignette edges (panorama wrapping)
  const vigLeft = ctx.createLinearGradient(0, 0, W * 0.08, 0);
  vigLeft.addColorStop(0, 'rgba(0,0,0,0.5)');
  vigLeft.addColorStop(1, 'transparent');
  ctx.fillStyle = vigLeft;
  ctx.fillRect(0, 0, W * 0.08, H);
  
  const vigRight = ctx.createLinearGradient(W * 0.92, 0, W, 0);
  vigRight.addColorStop(0, 'transparent');
  vigRight.addColorStop(1, 'rgba(0,0,0,0.5)');
  ctx.fillStyle = vigRight;
  ctx.fillRect(W * 0.92, 0, W * 0.08, H);
  
  return new THREE.CanvasTexture(c);
}

function drawRoomFeatures(ctx, W, H, palette) {
  const isPool = palette.floor === '#E8F4F8';
  const isGarden = palette.sky[0] === '#0A2810';
  const isDining = palette.sky[0] === '#0A0A18';
  const isMaster = palette.walls === '#C4A878';
  
  if (isPool) {
    // Water caustics
    ctx.save();
    ctx.globalAlpha = 0.3;
    for (let i = 0; i < 20; i++) {
      const cx = (Math.sin(i * 1.4) * 0.4 + 0.5) * W;
      const cy = H * 0.58 + (Math.cos(i * 1.7) * 0.1) * H;
      const r = 30 + i * 8;
      ctx.beginPath();
      ctx.arc(cx, cy, r, 0, Math.PI * 2);
      ctx.strokeStyle = '#5AC8E0';
      ctx.lineWidth = 1;
      ctx.stroke();
    }
    ctx.restore();
    
    // Water surface shimmer lines
    ctx.save();
    ctx.globalAlpha = 0.2;
    for (let y = H * 0.55; y < H * 0.7; y += 8) {
      ctx.beginPath();
      ctx.moveTo(0, y);
      for (let x = 0; x < W; x += 40) {
        ctx.quadraticCurveTo(x + 20, y + Math.sin(x * 0.05) * 4, x + 40, y);
      }
      ctx.strokeStyle = '#80E0FF';
      ctx.lineWidth = 1;
      ctx.stroke();
    }
    ctx.restore();
  }
  
  if (isGarden) {
    // Foliage clusters
    ctx.save();
    for (let i = 0; i < 30; i++) {
      const gx = (Math.sin(i * 2.1) * 0.45 + 0.5) * W;
      const gy = H * 0.3 + Math.cos(i * 1.3) * H * 0.15;
      const gr = 20 + Math.abs(Math.sin(i)) * 40;
      const g = ctx.createRadialGradient(gx, gy, 0, gx, gy, gr);
      g.addColorStop(0, '#3A7A28CC');
      g.addColorStop(1, 'transparent');
      ctx.fillStyle = g;
      ctx.beginPath();
      ctx.arc(gx, gy, gr, 0, Math.PI * 2);
      ctx.fill();
    }
    ctx.restore();
    
    // Dappled light
    ctx.save();
    ctx.globalAlpha = 0.15;
    for (let i = 0; i < 15; i++) {
      const lx = (Math.cos(i * 1.8) * 0.4 + 0.5) * W;
      const ly = H * 0.45 + Math.sin(i) * H * 0.1;
      const lg = ctx.createRadialGradient(lx, ly, 0, lx, ly, 60);
      lg.addColorStop(0, '#D0FF80');
      lg.addColorStop(1, 'transparent');
      ctx.fillStyle = lg;
      ctx.fillRect(0, 0, W, H);
    }
    ctx.restore();
  }
  
  if (isDining) {
    // Stars
    ctx.save();
    ctx.globalAlpha = 0.9;
    for (let i = 0; i < 200; i++) {
      const sx = (Math.sin(i * 2.3 + 0.1) * 0.5 + 0.5) * W;
      const sy = (Math.sin(i * 1.7 + 0.2) * 0.5 + 0.5) * H * 0.38;
      const sr = 0.5 + (i % 3) * 0.5;
      ctx.beginPath();
      ctx.arc(sx, sy, sr, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(255,240,${180 + (i % 75)},${0.5 + (i % 50) * 0.01})`;
      ctx.fill();
    }
    // Candlelight glow
    for (let i = 0; i < 5; i++) {
      const cx = W * (0.1 + i * 0.2);
      const cy = H * 0.55;
      const flameG = ctx.createRadialGradient(cx, cy, 0, cx, cy, 80);
      flameG.addColorStop(0, 'rgba(255,200,80,0.5)');
      flameG.addColorStop(1, 'transparent');
      ctx.fillStyle = flameG;
      ctx.fillRect(cx - 80, cy - 80, 160, 160);
    }
    ctx.restore();
  }
  
  if (isMaster) {
    // Soft light rays
    ctx.save();
    ctx.globalAlpha = 0.12;
    for (let i = 0; i < 6; i++) {
      const rx = W * (0.1 + i * 0.15);
      ctx.beginPath();
      ctx.moveTo(rx, 0);
      ctx.lineTo(rx - 60, H);
      ctx.lineTo(rx + 20, H);
      ctx.lineTo(rx + 80, 0);
      ctx.fillStyle = '#FFF0D0';
      ctx.fill();
    }
    ctx.restore();
    
    // Sheer curtain effect
    ctx.save();
    ctx.globalAlpha = 0.08;
    for (let x = 0; x < W; x += 80) {
      const wg = ctx.createLinearGradient(x, 0, x + 60, 0);
      wg.addColorStop(0, 'transparent');
      wg.addColorStop(0.5, '#FFFAE8');
      wg.addColorStop(1, 'transparent');
      ctx.fillStyle = wg;
      ctx.fillRect(x, H * 0.1, 60, H * 0.7);
    }
    ctx.restore();
  }
  
  // Atmospheric depth fog
  const fogGrad = ctx.createLinearGradient(0, H * 0.38, 0, H * 0.58);
  fogGrad.addColorStop(0, 'transparent');
  fogGrad.addColorStop(0.5, palette.walls + '40');
  fogGrad.addColorStop(1, 'transparent');
  ctx.fillStyle = fogGrad;
  ctx.fillRect(0, H * 0.38, W, H * 0.2);
}

function darken(hex, amount) {
  const num = parseInt(hex.slice(1), 16);
  const r = Math.max(0, ((num >> 16) & 255) * amount);
  const g = Math.max(0, ((num >> 8) & 255) * amount);
  const b = Math.max(0, (num & 255) * amount);
  return `rgb(${r},${g},${b})`;
}

function buildRoomNav() {
  const nav = document.getElementById('room-nav');
  nav.innerHTML = '';
  rooms.forEach((r, i) => {
    const btn = document.createElement('button');
    btn.className = 'room-dot-btn' + (i === currentRoom ? ' active' : '');
    btn.innerHTML = `<span class="dot-line"></span><span class="dot"></span><span style="opacity:${i===currentRoom?1:0.5}">${r.name.split(' ')[0]}</span>`;
    btn.addEventListener('click', () => navigateToRoom(i));
    nav.appendChild(btn);
  });
}

function navigateToRoom(index) {
  if (index === currentRoom || isTransitioning) return;
  isTransitioning = true;
  
  const overlay = document.getElementById('transition-overlay');
  const infoBlock = document.getElementById('room-info-block');
  
  overlay.classList.add('active');
  infoBlock.classList.add('changing');
  
  setTimeout(() => {
    currentRoom = index;
    const room = rooms[currentRoom];
    
    // Update texture — use real image if available, otherwise generate
    if (room.img) {
      const loader = new THREE.TextureLoader();
      loader.load(room.img, (realTex) => {
        realTex.mapping = THREE.EquirectangularReflectionMapping;
        panoramaScene.userData.sphere.material.map = realTex;
        panoramaScene.userData.sphere.material.needsUpdate = true;
      });
    } else {
      const newTex = generateRoomTexture(room.palette);
      panoramaScene.userData.sphere.material.map = newTex;
      panoramaScene.userData.sphere.material.needsUpdate = true;
    }
    
    // Update info
    document.getElementById('room-num').textContent = room.num;
    document.getElementById('room-name').textContent = room.name;
    document.getElementById('room-desc').textContent = room.desc;
    
    // Update nav dots
    document.querySelectorAll('.room-dot-btn').forEach((btn, i) => {
      btn.classList.toggle('active', i === currentRoom);
    });
    
    overlay.classList.remove('active');
    infoBlock.classList.remove('changing');
    isTransitioning = false;
  }, 500);
}

// ─────────────────────────────────────────────
// GALLERY
// ─────────────────────────────────────────────
function drawGallery() {
  const galleryItems = [
    { id: 'gc1', draw: drawGalleryPool },
    { id: 'gc2', draw: drawGallerySuite },
    { id: 'gc3', draw: drawGalleryGarden },
    { id: 'gc4', draw: drawGalleryDining },
    { id: 'gc5', draw: drawGallerySunrise },
  ];
  
  galleryItems.forEach(item => {
    const canvas = document.getElementById(item.id);
    const parent = canvas.parentElement;
    canvas.width = parent.offsetWidth * 2;
    canvas.height = parent.offsetHeight * 2;
    canvas.style.width = '100%';
    canvas.style.height = '100%';
    item.draw(canvas.getContext('2d'), canvas.width, canvas.height);
  });
}

function drawGalleryPool(ctx, W, H) {
  // Deep blue pool at golden hour
  const bg = ctx.createLinearGradient(0, 0, 0, H);
  bg.addColorStop(0, '#0A2840');
  bg.addColorStop(0.4, '#0D4060');
  bg.addColorStop(0.6, '#1A7090');
  bg.addColorStop(1, '#0A3050');
  ctx.fillStyle = bg; ctx.fillRect(0, 0, W, H);
  
  // Horizon glow
  const glow = ctx.createLinearGradient(0, H * 0.35, 0, H * 0.55);
  glow.addColorStop(0, 'rgba(255,150,50,0.4)');
  glow.addColorStop(1, 'transparent');
  ctx.fillStyle = glow; ctx.fillRect(0, 0, W, H);
  
  // Pool water
  const pool = ctx.createLinearGradient(0, H * 0.5, 0, H);
  pool.addColorStop(0, '#1A8AAA');
  pool.addColorStop(1, '#0A4060');
  ctx.fillStyle = pool; ctx.fillRect(0, H * 0.5, W, H * 0.5);
  
  // Shimmer
  ctx.save(); ctx.globalAlpha = 0.3;
  for (let i = 0; i < 10; i++) {
    ctx.beginPath();
    ctx.moveTo(0, H * 0.55 + i * 20);
    for (let x = 0; x < W; x += 30) {
      ctx.quadraticCurveTo(x + 15, H * 0.55 + i * 20 + Math.sin(x*0.1)*8, x+30, H * 0.55 + i * 20);
    }
    ctx.strokeStyle = '#80D8F0'; ctx.lineWidth = 1; ctx.stroke();
  }
  ctx.restore();
  
  // Sun
  const sunG = ctx.createRadialGradient(W*0.7, H*0.38, 0, W*0.7, H*0.38, 60);
  sunG.addColorStop(0, '#FFE080'); sunG.addColorStop(0.3, '#FF8030'); sunG.addColorStop(1, 'transparent');
  ctx.fillStyle = sunG; ctx.fillRect(0, 0, W, H);
}

function drawGallerySuite(ctx, W, H) {
  const bg = ctx.createLinearGradient(0, 0, 0, H);
  bg.addColorStop(0, '#F8F0E0'); bg.addColorStop(1, '#C8B898');
  ctx.fillStyle = bg; ctx.fillRect(0, 0, W, H);
  
  // Warm light
  const light = ctx.createRadialGradient(W*0.3, H*0.2, 0, W*0.3, H*0.2, W*0.6);
  light.addColorStop(0, 'rgba(255,200,80,0.3)'); light.addColorStop(1, 'transparent');
  ctx.fillStyle = light; ctx.fillRect(0, 0, W, H);
  
  // Floor
  ctx.fillStyle = '#8A6840'; ctx.fillRect(0, H*0.6, W, H*0.4);
  ctx.fillStyle = '#A07850'; 
  for(let i=0;i<W;i+=40){ctx.fillRect(i,H*0.6,20,H*0.4);}
  
  // Canopy bed silhouette
  ctx.fillStyle = '#2A1808';
  ctx.fillRect(W*0.2, H*0.3, W*0.6, H*0.1);
  ctx.fillRect(W*0.22, H*0.1, 8, H*0.2);
  ctx.fillRect(W*0.76, H*0.1, 8, H*0.2);
  ctx.fillRect(W*0.2, H*0.05, W*0.6, 6);
  
  // Sheer curtains
  ctx.save(); ctx.globalAlpha = 0.15;
  for(let x=W*0.2;x<W*0.8;x+=30){
    const wg=ctx.createLinearGradient(x,0,x+20,0);
    wg.addColorStop(0,'transparent'); wg.addColorStop(0.5,'#FFF8E8'); wg.addColorStop(1,'transparent');
    ctx.fillStyle=wg; ctx.fillRect(x,H*0.05,20,H*0.55);
  }
  ctx.restore();
}

function drawGalleryGarden(ctx, W, H) {
  const bg = ctx.createLinearGradient(0, 0, 0, H);
  bg.addColorStop(0, '#4A8A30'); bg.addColorStop(0.5, '#2A5A18'); bg.addColorStop(1, '#1A3A10');
  ctx.fillStyle = bg; ctx.fillRect(0, 0, W, H);
  
  // Dappled light
  ctx.save(); ctx.globalAlpha = 0.2;
  for(let i=0;i<20;i++){
    const lx=(Math.sin(i*1.7)*0.4+0.5)*W, ly=(Math.cos(i*1.3)*0.4+0.5)*H;
    const lg=ctx.createRadialGradient(lx,ly,0,lx,ly,50);
    lg.addColorStop(0,'#D0FF80'); lg.addColorStop(1,'transparent');
    ctx.fillStyle=lg; ctx.fillRect(0,0,W,H);
  }
  ctx.restore();
  
  // Foliage
  ctx.save();
  for(let i=0;i<40;i++){
    const fx=(Math.sin(i*2.1)*0.45+0.5)*W, fy=(Math.sin(i*1.8)*0.45+0.5)*H;
    const fr=15+Math.abs(Math.cos(i))*35;
    const g=ctx.createRadialGradient(fx,fy,0,fx,fy,fr);
    g.addColorStop(0,'rgba(80,160,40,0.8)'); g.addColorStop(1,'transparent');
    ctx.fillStyle=g; ctx.beginPath(); ctx.arc(fx,fy,fr,0,Math.PI*2); ctx.fill();
  }
  ctx.restore();
  
  // Stone path
  ctx.fillStyle='rgba(180,160,120,0.4)';
  ctx.beginPath();
  ctx.moveTo(W*0.4,H); ctx.quadraticCurveTo(W*0.5,H*0.6,W*0.55,0);
  ctx.lineTo(W*0.65,0); ctx.quadraticCurveTo(W*0.6,H*0.6,W*0.6,H);
  ctx.fill();
}

function drawGalleryDining(ctx, W, H) {
  const bg = ctx.createLinearGradient(0, 0, 0, H);
  bg.addColorStop(0, '#0A0818'); bg.addColorStop(0.3, '#1A1430'); bg.addColorStop(1, '#0A0A18');
  ctx.fillStyle = bg; ctx.fillRect(0, 0, W, H);
  
  // Stars
  ctx.save(); ctx.globalAlpha = 0.8;
  for(let i=0;i<100;i++){
    const sx=(Math.sin(i*2.3)*0.5+0.5)*W, sy=(Math.sin(i*1.7)*0.5+0.5)*H*0.5;
    ctx.beginPath(); ctx.arc(sx,sy,0.5+(i%3)*0.5,0,Math.PI*2);
    ctx.fillStyle=`rgba(255,240,200,${0.4+Math.sin(i)*0.4})`; ctx.fill();
  }
  ctx.restore();
  
  // Candlelight
  for(let i=0;i<4;i++){
    const cx=W*(0.15+i*0.23), cy=H*0.65;
    const flG=ctx.createRadialGradient(cx,cy,0,cx,cy,80);
    flG.addColorStop(0,'rgba(255,180,40,0.5)'); flG.addColorStop(1,'transparent');
    ctx.fillStyle=flG; ctx.fillRect(cx-80,cy-80,160,160);
  }
  
  // Table silhouette
  ctx.fillStyle='#1A0A04';
  ctx.fillRect(W*0.1,H*0.6,W*0.8,6);
  ctx.fillRect(W*0.1,H*0.62,W*0.8,H*0.1);
}

function drawGallerySunrise(ctx, W, H) {
  const bg = ctx.createLinearGradient(0, 0, 0, H);
  bg.addColorStop(0, '#1A0A20'); bg.addColorStop(0.3, '#6A2030');
  bg.addColorStop(0.6, '#E05030'); bg.addColorStop(0.8, '#F0A030');
  bg.addColorStop(1, '#F8C060');
  ctx.fillStyle = bg; ctx.fillRect(0, 0, W, H);
  
  // Horizon glow
  const hG=ctx.createRadialGradient(W*0.5,H*0.55,0,W*0.5,H*0.55,W*0.6);
  hG.addColorStop(0,'rgba(255,200,80,0.4)'); hG.addColorStop(1,'transparent');
  ctx.fillStyle=hG; ctx.fillRect(0,0,W,H);
  
  // Sea
  const sea=ctx.createLinearGradient(0,H*0.55,0,H);
  sea.addColorStop(0,'#2040608'); sea.addColorStop(0,'#204060'); sea.addColorStop(1,'#102030');
  ctx.fillStyle=sea; ctx.fillRect(0,H*0.55,W,H*0.45);
  
  // Terrace railing
  ctx.fillStyle='rgba(20,10,5,0.7)';
  ctx.fillRect(0,H*0.75,W,4);
  for(let x=0;x<W;x+=30){ ctx.fillRect(x+12,H*0.55,3,H*0.2); }
}

// ─────────────────────────────────────────────
// MAP CANVAS
// ─────────────────────────────────────────────
function drawMapCanvas() {
  const canvas = document.getElementById('map-canvas');
  const parent = canvas.parentElement;
  canvas.width = parent.offsetWidth;
  canvas.height = parent.offsetHeight;
  const ctx = canvas.getContext('2d');
  const W = canvas.width, H = canvas.height;
  
  // Sea background
  const seaG = ctx.createLinearGradient(0, 0, W, H);
  seaG.addColorStop(0, '#1A4A5A'); seaG.addColorStop(1, '#0D2A38');
  ctx.fillStyle = seaG; ctx.fillRect(0, 0, W, H);
  
  // Grid lines (map grid)
  ctx.save(); ctx.globalAlpha = 0.08;
  ctx.strokeStyle = '#80C0D0'; ctx.lineWidth = 1;
  for (let x = 0; x < W; x += 40) {
    ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, H); ctx.stroke();
  }
  for (let y = 0; y < H; y += 40) {
    ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(W, y); ctx.stroke();
  }
  ctx.restore();
  
  // Koh Samui island shape
  const cx = W * 0.5, cy = H * 0.5;
  ctx.save();
  ctx.fillStyle = '#2A5030';
  ctx.beginPath();
  ctx.ellipse(cx, cy, W * 0.38, H * 0.42, -0.2, 0, Math.PI * 2);
  ctx.fill();
  
  // Interior fill
  ctx.fillStyle = '#3A6A3A';
  ctx.beginPath();
  ctx.ellipse(cx, cy, W * 0.3, H * 0.33, -0.2, 0, Math.PI * 2);
  ctx.fill();
  
  // Interior green
  ctx.fillStyle = '#4A7A48';
  ctx.beginPath();
  ctx.ellipse(cx * 0.95, cy * 1.05, W * 0.18, H * 0.2, 0.3, 0, Math.PI * 2);
  ctx.fill();
  
  ctx.restore();
  
  // Coastline highlight
  ctx.save();
  ctx.globalAlpha = 0.2;
  const coastG = ctx.createRadialGradient(cx, cy, W*0.35, cx, cy, W*0.45);
  coastG.addColorStop(0, 'transparent');
  coastG.addColorStop(0.7, '#80D0A0');
  coastG.addColorStop(1, 'transparent');
  ctx.fillStyle = coastG;
  ctx.fillRect(0, 0, W, H);
  ctx.restore();
  
  // Roads (simplified)
  ctx.save();
  ctx.globalAlpha = 0.4;
  ctx.strokeStyle = '#C8A840'; ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.ellipse(cx, cy, W * 0.28, H * 0.3, -0.2, 0, Math.PI * 2);
  ctx.stroke();
  ctx.restore();
  
  // Villa location dot (north shore)
  const vx = cx - W * 0.05, vy = cy - H * 0.32;
  ctx.beginPath();
  ctx.arc(vx, vy, 8, 0, Math.PI * 2);
  ctx.fillStyle = 'rgba(196, 144, 58, 0.3)';
  ctx.fill();
  
  // Compass rose
  drawCompassRose(ctx, W * 0.88, H * 0.12, 28);
}

function drawCompassRose(ctx, x, y, r) {
  ctx.save();
  ctx.translate(x, y);
  
  // Outer ring
  ctx.beginPath();
  ctx.arc(0, 0, r, 0, Math.PI * 2);
  ctx.strokeStyle = 'rgba(196, 144, 58, 0.5)'; ctx.lineWidth = 1; ctx.stroke();
  
  // N arrow
  ctx.fillStyle = '#C4903A';
  ctx.beginPath(); ctx.moveTo(0, -r * 0.8); ctx.lineTo(-5, 0); ctx.lineTo(5, 0); ctx.closePath(); ctx.fill();
  
  ctx.fillStyle = 'rgba(196, 144, 58, 0.4)';
  ctx.beginPath(); ctx.moveTo(0, r * 0.8); ctx.lineTo(-5, 0); ctx.lineTo(5, 0); ctx.closePath(); ctx.fill();
  
  ctx.fillStyle = '#C4903A';
  ctx.font = '9px Jost'; ctx.textAlign = 'center';
  ctx.fillText('N', 0, -r - 4);
  
  ctx.restore();
}

// ─────────────────────────────────────────────
// INTERSECTION OBSERVER — entrance animations
// ─────────────────────────────────────────────
const observer = new IntersectionObserver((entries) => {
  entries.forEach(e => {
    if (e.isIntersecting) {
      e.target.style.opacity = '1';
      e.target.style.transform = 'translateY(0)';
    }
  });
}, { threshold: 0.1 });

document.querySelectorAll('.amenity-card, .stat-item').forEach(el => {
  el.style.opacity = '0';
  el.style.transform = 'translateY(30px)';
  el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
  observer.observe(el);
});
</script>
</body>
</html>
